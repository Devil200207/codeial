<!DOCTYPE html>
<html>

<head>
    <title>
        <%= title %>
    </title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.css"
        integrity="sha512-NXUhxhkDgZYOMjaIgd89zF2w51Mub53Ru3zCNp5LTlEzMbNNAjTjDbpURYGS5Mop2cU4b7re1nOIucsVlrx9fA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"
        integrity="sha512-lOrm9FgT1LKOJRUXF3tp6QaMorJftUjowOWiDcG5GFZ/q7ukof19V0HKx/GWzXCdt9zYju3/KhBNdCLzK8b90Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <script src="https://kit.fontawesome.com/63e49ec91e.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width= device-width, initial-scale=1" />
    <%- style %>
</head>

<body>
    <%- include('_header');%>

        <main id="layout-main">
            <%- body %>
        </main>

        <%- include('_footer'); %>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                crossorigin="anonymous"></script>
            <script>
      <%if (flash.success && flash.success.length > 0) {%>
                    new Noty({
                        theme: 'relax',
                        text: "<%= flash.success %>",
                        type: 'success',
                        layout: 'topRight',
                        timeout: 1500
                    }).show();
      <%}%>

      <%if (flash.error && flash.error.length > 0) {%>
                    new Noty({
                        theme: 'relax',
                        text: "<%= flash.error %>",
                        type: 'error',
                        layout: 'topRight',
                        timeout: 1500
                    }).show();
      <%}%>
            </script>

            <!-- importing this script for creating the comments -->
            <script src="/js/home_post_comments.js"></script>
            <script src="/js/home_posts.js"></script>

            <!-- import the script file for toggle likes, also run it over for the already present posts and comments on the page -->
            <script src="js/toggle_likes.js"></script>
            <script>
                    $(".toggle-like-button").each(function () {
                        let self = this;
                        let toggleLike = new ToggleLike(self);
                    });
            </script>

            <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.3/socket.io.js"></script> -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js"></script>
            <script src="js/chat_engine.js"></script>
            <% if(locals.user) { %>
                <script>
                    new ChatEngine("chat-box", "<%= locals.user.email %>");
                </script>
                <%}%>
</body>

</html>